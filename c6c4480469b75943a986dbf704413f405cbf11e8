{
  "comments": [
    {
      "key": {
        "uuid": "e3f37406_64a3bfd1",
        "filename": "cps-rest/docs/openapi/cpsData.yml",
        "patchSetId": 2
      },
      "lineNbr": 181,
      "author": {
        "id": 7680
      },
      "writtenOn": "2021-10-22T03:32:03Z",
      "side": 1,
      "message": "I think we would be providing the xpath of the data node to be deleted.",
      "range": {
        "startLine": 181,
        "startChar": 76,
        "endLine": 181,
        "endChar": 93
      },
      "revId": "c6c4480469b75943a986dbf704413f405cbf11e8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e8d19101_da2afbef",
        "filename": "cps-rest/docs/openapi/cpsData.yml",
        "patchSetId": 2
      },
      "lineNbr": 181,
      "author": {
        "id": 7744
      },
      "writtenOn": "2021-10-22T09:03:03Z",
      "side": 1,
      "message": "This should read xpath. Resolved",
      "parentUuid": "e3f37406_64a3bfd1",
      "range": {
        "startLine": 181,
        "startChar": 76,
        "endLine": 181,
        "endChar": 93
      },
      "revId": "c6c4480469b75943a986dbf704413f405cbf11e8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55af8d43_ba0e6afc",
        "filename": "cps-rest/src/main/java/org/onap/cps/rest/controller/DataRestController.java",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 7680
      },
      "writtenOn": "2021-10-22T03:32:03Z",
      "side": 1,
      "message": "is it the xpath to be deleted or parentNode xpath?",
      "range": {
        "startLine": 65,
        "startChar": 65,
        "endLine": 65,
        "endChar": 80
      },
      "revId": "c6c4480469b75943a986dbf704413f405cbf11e8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "24f03c09_01cc7692",
        "filename": "cps-rest/src/main/java/org/onap/cps/rest/controller/DataRestController.java",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 7744
      },
      "writtenOn": "2021-10-22T09:03:03Z",
      "side": 1,
      "message": "xPath have changed this.",
      "parentUuid": "55af8d43_ba0e6afc",
      "range": {
        "startLine": 65,
        "startChar": 65,
        "endLine": 65,
        "endChar": 80
      },
      "revId": "c6c4480469b75943a986dbf704413f405cbf11e8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cab0df21_c8c3b36a",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 2
      },
      "lineNbr": 397,
      "author": {
        "id": 7680
      },
      "writtenOn": "2021-10-22T03:32:03Z",
      "side": 1,
      "message": "We also store unique key in xpath DB using \u0027]\u0027. I am not sure it is a good enough check.\n\nPlease refer cps-path-query.sql file in the test/data folder",
      "range": {
        "startLine": 396,
        "startChar": 8,
        "endLine": 397,
        "endChar": 8
      },
      "revId": "c6c4480469b75943a986dbf704413f405cbf11e8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dbe2746a_647a5bc9",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 2
      },
      "lineNbr": 397,
      "author": {
        "id": 7744
      },
      "writtenOn": "2021-10-22T09:03:03Z",
      "side": 1,
      "message": "Looking at the examples within the cps-path-query script, is this not still a list node as part of a list of shops, each with a unique ID",
      "parentUuid": "cab0df21_c8c3b36a",
      "range": {
        "startLine": 396,
        "startChar": 8,
        "endLine": 397,
        "endChar": 8
      },
      "revId": "c6c4480469b75943a986dbf704413f405cbf11e8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eeaed6e9_9686f2dd",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 2
      },
      "lineNbr": 397,
      "author": {
        "id": 6639
      },
      "writtenOn": "2021-10-22T10:44:25Z",
      "side": 1,
      "message": "Hi Renu, \u0027unique key\u0027 stored in DB only apply to \u0027list\u0027 elements normal yang \u0027container\u0027 elements do not have unique keys and dont have the [@key\u003dvalue] in their xpath",
      "parentUuid": "dbe2746a_647a5bc9",
      "range": {
        "startLine": 396,
        "startChar": 8,
        "endLine": 397,
        "endChar": 8
      },
      "revId": "c6c4480469b75943a986dbf704413f405cbf11e8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46cfecb6_ecb117a4",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 2
      },
      "lineNbr": 397,
      "author": {
        "id": 7744
      },
      "writtenOn": "2021-10-22T10:44:52Z",
      "side": 1,
      "message": "I understand what you mean now Renu! If we were to do a search for a path such as /categories[@code\u003d1]/books/book[@title\u003d\u0027Dune\u0027 and @price\u003d5] where it doesn\u0027t have to specifically be part of a list.\n\nBut within CPS when we define xpath, this means that it is an \u0027absolute\u0027 path, with no extra conditions. Which is currently only what this api will accept. For paths with conditions, we define the parameter as cps-path",
      "parentUuid": "dbe2746a_647a5bc9",
      "range": {
        "startLine": 396,
        "startChar": 8,
        "endLine": 397,
        "endChar": 8
      },
      "revId": "c6c4480469b75943a986dbf704413f405cbf11e8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "359221a1_f8087fb3",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 2
      },
      "lineNbr": 397,
      "author": {
        "id": 7680
      },
      "writtenOn": "2021-10-22T19:05:46Z",
      "side": 1,
      "message": "I thought that we are also keeping the identifier in the xpath. Sorry for the confusion.\n\nIf this is the case I think we can still delete any data-node by xpath which is available in our DB except logical dataNode (list-node). And, we should not require any specific check for list-node as it does not exist in our DB. \n\nFor example, list node is \u0027categories\u0027 which does not exist in our DB.\nand list-node-element is a datanode \u0027categories[@code\u003d1]\u0027 which we should be able to support with existing logic.\n\nBut, if we do not find any fragment by xpath, then the issue can be \n1. wrong xpath or \n2. trying to delete list-node. \nIn this case of list node, we can use existing cpsDataPersistenceService.deleteListDataNodes(dataspaceName, anchorName, listNodeXpath) and provide a functionality which works for all data-node type.",
      "parentUuid": "46cfecb6_ecb117a4",
      "range": {
        "startLine": 396,
        "startChar": 8,
        "endLine": 397,
        "endChar": 8
      },
      "revId": "c6c4480469b75943a986dbf704413f405cbf11e8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "972f78aa_8956bc7b",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 2
      },
      "lineNbr": 397,
      "author": {
        "id": 7744
      },
      "writtenOn": "2021-10-26T09:25:47Z",
      "side": 1,
      "message": "Yes Renu, we discussed this internally and can bring this up again. I think we may add logic to not throw a list node exception on this endpoint, but instead redirect to deleteListDataNodes if it detects the closing square bracket when used with this endpoint. We have decided to keep both endpoints though for backwards compatibility.",
      "parentUuid": "359221a1_f8087fb3",
      "range": {
        "startLine": 396,
        "startChar": 8,
        "endLine": 397,
        "endChar": 8
      },
      "revId": "c6c4480469b75943a986dbf704413f405cbf11e8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f51030c4_6a1f66f1",
        "filename": "cps-ri/src/test/groovy/org/onap/cps/spi/impl/CpsDataPersistenceServiceIntegrationSpec.groovy",
        "patchSetId": 2
      },
      "lineNbr": 515,
      "author": {
        "id": 7680
      },
      "writtenOn": "2021-10-22T03:32:03Z",
      "side": 1,
      "message": "Should add test where xpath has key property too. \nShould also add a test for list-node.",
      "range": {
        "startLine": 512,
        "startChar": 8,
        "endLine": 515,
        "endChar": 151
      },
      "revId": "c6c4480469b75943a986dbf704413f405cbf11e8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "797bf2fa_0ff51a88",
        "filename": "cps-ri/src/test/groovy/org/onap/cps/spi/impl/CpsDataPersistenceServiceIntegrationSpec.groovy",
        "patchSetId": 2
      },
      "lineNbr": 515,
      "author": {
        "id": 7744
      },
      "writtenOn": "2021-10-22T09:03:03Z",
      "side": 1,
      "message": "This is handled in the exceptions test below Renu. As I was under the impression that these are contained within lists.",
      "parentUuid": "f51030c4_6a1f66f1",
      "range": {
        "startLine": 512,
        "startChar": 8,
        "endLine": 515,
        "endChar": 151
      },
      "revId": "c6c4480469b75943a986dbf704413f405cbf11e8",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}