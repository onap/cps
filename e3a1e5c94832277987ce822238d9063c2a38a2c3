{
  "comments": [
    {
      "key": {
        "uuid": "f698a863_7ad5f4ab",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 88,
      "author": {
        "id": 7680
      },
      "writtenOn": "2022-03-24T16:19:10Z",
      "side": 1,
      "message": "Same comment as sessionMape",
      "range": {
        "startLine": 88,
        "startChar": 4,
        "endLine": 88,
        "endChar": 49
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8dc5b9f8_71b142ab",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 89,
      "author": {
        "id": 7680
      },
      "writtenOn": "2022-03-24T16:19:10Z",
      "side": 1,
      "message": "Blocking Comment: This stateless class will have state now. I would recommend to manage Session in a separate class. \n\nBlocking Comment: Concurrency need to be considered (ConcurrentHashMap).",
      "range": {
        "startLine": 89,
        "startChar": 4,
        "endLine": 89,
        "endChar": 69
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c587935_8b28e4eb",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 89,
      "author": {
        "id": 7680
      },
      "writtenOn": "2022-03-24T16:19:10Z",
      "side": 1,
      "message": "@Team, \nApplication Graceful shutdown: close the transaction when the application shutdown event is received.",
      "range": {
        "startLine": 89,
        "startChar": 40,
        "endLine": 89,
        "endChar": 50
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e0c67715_2c1ff18a",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 89,
      "author": {
        "id": 7965
      },
      "writtenOn": "2022-03-25T10:42:08Z",
      "side": 1,
      "message": "Shutdown hook , where we iterate over the map elements and explicitly close them. Right? \nor something else?",
      "parentUuid": "9c587935_8b28e4eb",
      "range": {
        "startLine": 89,
        "startChar": 40,
        "endLine": 89,
        "endChar": 50
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d1d3da15_1f12f79c",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 89,
      "author": {
        "id": 6639
      },
      "writtenOn": "2022-03-25T11:31:26Z",
      "side": 1,
      "message": "- we assume the DB will handle transaction closure in case of a crash or graceful shutdown of one service",
      "parentUuid": "e0c67715_2c1ff18a",
      "range": {
        "startLine": 89,
        "startChar": 40,
        "endLine": 89,
        "endChar": 50
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8e44acb0_0f0b1baa",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 89,
      "author": {
        "id": 6639
      },
      "writtenOn": "2022-03-25T11:31:26Z",
      "side": 1,
      "message": "yea, I agree with both\nsuggested separate class: SessionManager",
      "parentUuid": "8dc5b9f8_71b142ab",
      "range": {
        "startLine": 89,
        "startChar": 4,
        "endLine": 89,
        "endChar": 69
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a3ec7fc1_7ce73dd6",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 216,
      "author": {
        "id": 7680
      },
      "writtenOn": "2022-03-24T16:19:10Z",
      "side": 1,
      "message": "Can declare a Domain object CustomSession (any custom name) as an Interface. \ncps-ri \n1. can have an a HibernateSessionImpl implements CustomSession. \n2. Session Manager which maintains all the sessions \n\nI think we need a proposal on designing it. @Team what are your views on it?",
      "range": {
        "startLine": 216,
        "startChar": 14,
        "endLine": 216,
        "endChar": 21
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10d6ccfc_2081dbf3",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 219,
      "author": {
        "id": 7680
      },
      "writtenOn": "2022-03-24T16:19:10Z",
      "side": 1,
      "message": "How do we manage clean-up if user does not close transactions?",
      "range": {
        "startLine": 219,
        "startChar": 7,
        "endLine": 219,
        "endChar": 35
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb852cf1_88da7767",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 219,
      "author": {
        "id": 7931
      },
      "writtenOn": "2022-03-25T10:32:59Z",
      "side": 1,
      "message": "from what I remember, as for now we are assuming that the client will use good practice of starting and closing the session",
      "parentUuid": "10d6ccfc_2081dbf3",
      "range": {
        "startLine": 219,
        "startChar": 7,
        "endLine": 219,
        "endChar": 35
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "55300397_dc7f5f4c",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 219,
      "author": {
        "id": 6639
      },
      "writtenOn": "2022-03-25T11:31:26Z",
      "side": 1,
      "message": "agreed, as disucssed CPS is not responsible, we assume Postgress as underlying mechanism too to handle this",
      "parentUuid": "cb852cf1_88da7767",
      "range": {
        "startLine": 219,
        "startChar": 7,
        "endLine": 219,
        "endChar": 35
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "26ac7c81_58c57176",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 224,
      "author": {
        "id": 7680
      },
      "writtenOn": "2022-03-24T16:19:10Z",
      "side": 1,
      "message": "this close session method does not let user decide to commit or rollback. \n\nShould we even club these two features? As user can open a session so we need to give ability to commit or rollback too.",
      "range": {
        "startLine": 224,
        "startChar": 16,
        "endLine": 224,
        "endChar": 28
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd98b0b4_c5675269",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 224,
      "author": {
        "id": 7931
      },
      "writtenOn": "2022-03-25T10:25:44Z",
      "side": 1,
      "message": "I believe this is out of scope for this user story(start and stop sessions). I think the mentioned capabilities shall be included as part of the anchor locking user story?",
      "parentUuid": "26ac7c81_58c57176",
      "range": {
        "startLine": 224,
        "startChar": 16,
        "endLine": 224,
        "endChar": 28
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "406c8084_9ec03b75",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 224,
      "author": {
        "id": 6639
      },
      "writtenOn": "2022-03-25T11:31:26Z",
      "side": 1,
      "message": "All of this has bene discussed with Tony, I am not sure if you were in all meeting Renu. But it was a very clear guidline not to expose the concept of a transaction to the user",
      "parentUuid": "cd98b0b4_c5675269",
      "range": {
        "startLine": 224,
        "startChar": 16,
        "endLine": 224,
        "endChar": 28
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d8596da_f4783b16",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 234,
      "author": {
        "id": 7680
      },
      "writtenOn": "2022-03-24T16:19:10Z",
      "side": 1,
      "message": "@Team As user has already sent request to close session, should we close and remove from Map even in the case of error?",
      "range": {
        "startLine": 225,
        "startChar": 8,
        "endLine": 234,
        "endChar": 37
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7d6c0157_5231d781",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 234,
      "author": {
        "id": 6639
      },
      "writtenOn": "2022-03-25T11:31:26Z",
      "side": 1,
      "message": "note sure what you mean...",
      "parentUuid": "7d8596da_f4783b16",
      "range": {
        "startLine": 225,
        "startChar": 8,
        "endLine": 234,
        "endChar": 37
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc18bb49_b8f04195",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 246,
      "author": {
        "id": 7680
      },
      "writtenOn": "2022-03-24T16:19:10Z",
      "side": 1,
      "message": "Single Responsibility principle: This functionality belongs to a class of its own.",
      "range": {
        "startLine": 213,
        "startChar": 4,
        "endLine": 246,
        "endChar": 5
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a710839_c1d0d754",
        "filename": "cps-ri/src/main/java/org/onap/cps/spi/impl/CpsDataPersistenceServiceImpl.java",
        "patchSetId": 3
      },
      "lineNbr": 246,
      "author": {
        "id": 6639
      },
      "writtenOn": "2022-03-25T11:31:26Z",
      "side": 1,
      "message": "agreed, lets create a sessionManager",
      "parentUuid": "fc18bb49_b8f04195",
      "range": {
        "startLine": 213,
        "startChar": 4,
        "endLine": 246,
        "endChar": 5
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f8d21a2_315cc420",
        "filename": "cps-ri/src/test/groovy/org/onap/cps/spi/impl/CpsDataPersistenceServiceIntegrationSpec.groovy",
        "patchSetId": 3
      },
      "lineNbr": 640,
      "author": {
        "id": 6639
      },
      "writtenOn": "2022-03-24T15:50:58Z",
      "side": 1,
      "message": "NB: I usually using something like \u0027unknown session id\u0027",
      "range": {
        "startLine": 640,
        "startChar": 35,
        "endLine": 640,
        "endChar": 39
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b73dfb60_53d6c8ea",
        "filename": "cps-ri/src/test/groovy/org/onap/cps/spi/impl/CpsDataPersistenceServiceIntegrationSpec.groovy",
        "patchSetId": 3
      },
      "lineNbr": 640,
      "author": {
        "id": 6639
      },
      "writtenOn": "2022-03-24T15:50:58Z",
      "side": 1,
      "message": "replace all double \" with single \u0027",
      "range": {
        "startLine": 640,
        "startChar": 33,
        "endLine": 640,
        "endChar": 35
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2896a578_7c58f2fa",
        "filename": "cps-ri/src/test/groovy/org/onap/cps/spi/impl/CpsDataPersistenceServiceIntegrationSpec.groovy",
        "patchSetId": 3
      },
      "lineNbr": 645,
      "author": {
        "id": 6639
      },
      "writtenOn": "2022-03-24T15:50:58Z",
      "side": 1,
      "message": "not need to assert the whole string from a testing point of view that fact it contains the request id is good enough anything more makes the test \u0027brittle\u0027",
      "range": {
        "startLine": 645,
        "startChar": 58,
        "endLine": 645,
        "endChar": 77
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87842269_41386bc0",
        "filename": "cps-service/src/main/java/org/onap/cps/spi/CpsDataPersistenceService.java",
        "patchSetId": 3
      },
      "lineNbr": 152,
      "author": {
        "id": 6639
      },
      "writtenOn": "2022-03-24T15:50:58Z",
      "side": 1,
      "message": "should NOT  mention transactions\ninstead maybe say something like a session can be used to group a few interaction with the persistence service and will allow the use of locks",
      "range": {
        "startLine": 152,
        "startChar": 23,
        "endLine": 152,
        "endChar": 41
      },
      "revId": "e3a1e5c94832277987ce822238d9063c2a38a2c3",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}