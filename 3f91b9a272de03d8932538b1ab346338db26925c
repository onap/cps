{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "73c8d13c_6d2b218f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 8063
      },
      "writtenOn": "2023-11-22T14:26:22Z",
      "side": 1,
      "message": "I\u0027ll review the unit tests later.",
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d73f1602_169447c1",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 58,
      "author": {
        "id": 8155
      },
      "writtenOn": "2023-11-22T13:51:35Z",
      "side": 1,
      "message": "I dont really like the name here. Using \u0027Or\u0027 is not a good pattern, if the class has more responsibilities then we should create 2 separate classes and a base class for common stuff.\n\nBut in this case I would stuck with the original name or with something like \u0027SyncOperationsUtil\u0027.",
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dfb91e1d_2fc880e1",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 58,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T15:01:10Z",
      "side": 1,
      "message": "ModuleOperationsUtils is more appropriate name.",
      "parentUuid": "d73f1602_169447c1",
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "685774d6_7feb43ea",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 58,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T15:05:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dfb91e1d_2fc880e1",
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11a9b7c7_85f7852d",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 133,
      "author": {
        "id": 8063
      },
      "writtenOn": "2023-11-22T14:26:22Z",
      "side": 1,
      "message": "I would have re-write this block like below:\n\n        final Map\u003cString, String\u003e compositeStateLockDetails \u003d getCompositeStateDetails(compositeState.getLockReason());\n\n        if (compositeStateLockDetails.isEmpty()) {\n            log.debug(\"There is no lock\");\n        } else {\n            attempt \u003d 1 + Integer.parseInt(compositeStateLockDetails.get(RETRY_ATTEMPT_KEY));\n\n            compositeState.setLockReason(CompositeState.LockReason.builder()\n                .details(String.format(\"Upgrade to ModuleSetTag: %s Attempt #%d failed: %s\",\n                    compositeStateLockDetails.get(MODULE_SET_TAG_KEY), attempt, errorMessage))\n                .lockReasonCategory(lockReasonCategory).build());\n        }",
      "range": {
        "startLine": 131,
        "startChar": 0,
        "endLine": 133,
        "endChar": 9
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3e493bd_23980c5e",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 133,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T14:44:10Z",
      "side": 1,
      "message": "we dont need else block here.",
      "parentUuid": "11a9b7c7_85f7852d",
      "range": {
        "startLine": 131,
        "startChar": 0,
        "endLine": 133,
        "endChar": 9
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "69ef5d59_f06b14e6",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 133,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T15:05:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e3e493bd_23980c5e",
      "range": {
        "startLine": 131,
        "startChar": 0,
        "endLine": 133,
        "endChar": 9
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54a770f1_04516cc4",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 146,
      "author": {
        "id": 8063
      },
      "writtenOn": "2023-11-22T14:26:22Z",
      "side": 1,
      "message": "Since you are getting comp. state details for locked one, better to have name indicate the purpose e.g. getCompositeStateLockDetails",
      "range": {
        "startLine": 146,
        "startChar": 38,
        "endLine": 146,
        "endChar": 62
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28b4e594_31af2058",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 146,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T14:44:10Z",
      "side": 1,
      "message": "renamed as : getLockedCompositeStateDetails",
      "parentUuid": "54a770f1_04516cc4",
      "range": {
        "startLine": 146,
        "startChar": 38,
        "endLine": 146,
        "endChar": 62
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c884aa93_e1d9fe44",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 146,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T15:05:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "28b4e594_31af2058",
      "range": {
        "startLine": 146,
        "startChar": 38,
        "endLine": 146,
        "endChar": 62
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a557f11a_2ab2ea76",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 154,
      "author": {
        "id": 8063
      },
      "writtenOn": "2023-11-22T14:26:22Z",
      "side": 1,
      "message": "no need to run matcher again, you can use moduleSetTag as comes from line 152",
      "range": {
        "startLine": 154,
        "startChar": 66,
        "endLine": 154,
        "endChar": 110
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d43d8d7d_bdb95892",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 154,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T14:44:10Z",
      "side": 1,
      "message": "re-used",
      "parentUuid": "a557f11a_2ab2ea76",
      "range": {
        "startLine": 154,
        "startChar": 66,
        "endLine": 154,
        "endChar": 110
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6292dadb_c248e637",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 154,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T15:05:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d43d8d7d_bdb95892",
      "range": {
        "startLine": 154,
        "startChar": 66,
        "endLine": 154,
        "endChar": 110
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "23b0b7b6_13d2f30e",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 158,
      "author": {
        "id": 8063
      },
      "writtenOn": "2023-11-22T14:26:22Z",
      "side": 1,
      "message": "same as above you can use numberOfAttempts variable instead of running matcher again",
      "range": {
        "startLine": 158,
        "startChar": 65,
        "endLine": 158,
        "endChar": 103
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0ea1cb14_b464697b",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 158,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T14:44:10Z",
      "side": 1,
      "message": "re-used",
      "parentUuid": "23b0b7b6_13d2f30e",
      "range": {
        "startLine": 158,
        "startChar": 65,
        "endLine": 158,
        "endChar": 103
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c138c5a7_bd27e63a",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 158,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T15:05:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0ea1cb14_b464697b",
      "range": {
        "startLine": 158,
        "startChar": 65,
        "endLine": 158,
        "endChar": 103
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c83bf719_97635dad",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 191,
      "author": {
        "id": 8155
      },
      "writtenOn": "2023-11-22T13:51:35Z",
      "side": 1,
      "message": "private methods should be placed after public methods\n\nalso why private static?",
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "543ceb57_b4cf4808",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 191,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T14:44:10Z",
      "side": 1,
      "message": "static is removed.",
      "parentUuid": "c83bf719_97635dad",
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9ad7d37d_e09db3d1",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 191,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T15:05:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "543ceb57_b4cf4808",
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ee6ce2c_8c4b87aa",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 201,
      "author": {
        "id": 8063
      },
      "writtenOn": "2023-11-22T14:26:22Z",
      "side": 1,
      "message": "Same as above:\n\n        if (compositeStateLockDetails.isEmpty()) {\n            timeInMinutesUntilNextAttempt \u003d 1;\n            log.info(\"First Attempt: no current attempts found.\");\n        } else {\n            timeInMinutesUntilNextAttempt \u003d (int) Math.pow(2, Integer.parseInt(compositeStateDetails\n                .get(RETRY_ATTEMPT_KEY)));\n        }",
      "range": {
        "startLine": 195,
        "startChar": 0,
        "endLine": 201,
        "endChar": 9
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2fd4e7ac_d12c51c4",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 201,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T14:44:10Z",
      "side": 1,
      "message": "refactored.",
      "parentUuid": "9ee6ce2c_8c4b87aa",
      "range": {
        "startLine": 195,
        "startChar": 0,
        "endLine": 201,
        "endChar": 9
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "77e25940_b48fcbe8",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtils.java",
        "patchSetId": 4
      },
      "lineNbr": 201,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T15:05:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2fd4e7ac_d12c51c4",
      "range": {
        "startLine": 195,
        "startChar": 0,
        "endLine": 201,
        "endChar": 9
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb4b16f4_24099150",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncService.java",
        "patchSetId": 4
      },
      "lineNbr": 79,
      "author": {
        "id": 8063
      },
      "writtenOn": "2023-11-22T14:26:22Z",
      "side": 1,
      "message": "isInUpgradeOrFailed",
      "range": {
        "startLine": 79,
        "startChar": 22,
        "endLine": 79,
        "endChar": 32
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "966571a5_5761200b",
        "filename": "cps-ncmp-service/src/main/java/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncService.java",
        "patchSetId": 4
      },
      "lineNbr": 79,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T15:05:53Z",
      "side": 1,
      "message": "we chose this name as in both the case module is in upgrade operation only.",
      "parentUuid": "cb4b16f4_24099150",
      "range": {
        "startLine": 79,
        "startChar": 22,
        "endLine": 79,
        "endChar": 32
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc269fbe_2f74447f",
        "filename": "cps-ncmp-service/src/test/groovy/org/onap/cps/ncmp/api/impl/inventory/sync/ModuleSyncOrUpgradeUtilsSpec.groovy",
        "patchSetId": 4
      },
      "lineNbr": 209,
      "author": {
        "id": 7957
      },
      "writtenOn": "2023-11-22T13:04:50Z",
      "side": 1,
      "message": "try to fing why this is failing due to null attempt",
      "range": {
        "startLine": 209,
        "startChar": 14,
        "endLine": 209,
        "endChar": 166
      },
      "revId": "3f91b9a272de03d8932538b1ab346338db26925c",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a"
    }
  ]
}